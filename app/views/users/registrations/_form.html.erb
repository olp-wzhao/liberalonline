<% unless current_user.nil? %>
   <% if current_user.identities.count > 0 %>
        <%= image_tag current_user.identities.first.image %>
   <% end %>
<% end %>

<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :remote => true) do |f| %>

  <%= f.input :email, required: true, autofocus: true, class: 'submittable', placeholder: 'Enter Email', input_html: { onblur: 'isEmailUnique("' + validate_user_url + '")' }, label: false %>
  <span id="user_email_validation"></span>
  <%= f.input :first_name, placeholder: 'First Name', label: false %>
  <%= f.input :last_name, placeholder: 'Last Name', label: false %>
    <% unless @user.valid? %>
        <%= f.input :password, :required => true, placeholder: 'Password', label: false %>
        <%= f.input :password_confirmation, :required => true, placeholder: 'Repeat Password', label: false %>
    <% end %>
  <%= f.input :address, placeholder: 'Address', label: false %>
  <%= f.input :postal_code, placeholder: 'Postal Code' , input_html: { onblur: 'findRiding("' + find_riding_url + '")' }, label: false %>
    <span id='riding_box'></span>
  <%= f.hidden_field :riding_id %>
  <%= f.input :city, placeholder: 'City', label: false %>
  <%= f.input :phone_number, as: :tel, :size => 30, placeholder: 'Phone Number', label: false %>
  <%= f.input :birthday, label:'Date of Birth', as: :date, start_year: Date.today.year - 90,
                                                end_year: Date.today.year - 12 %>
  <%= f.input :image, as: :file, label: 'Upload Image' %>
  <%= f.hidden_field :image_cache %>
  <%= f.button :submit, 'Sign up', :class => 'btn-primary' %>
  <div id="errors"></div>
<% end %>

<%= content_for :scripts_for_body do %>
    <script type='text/javascript'>

    </script>
<% end %>