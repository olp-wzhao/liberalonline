<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Ontario Liberal Party - BETA - Kathleen Wynne - Not for Release</title>
    <%= if @allow_google_index then raw('<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">') else raw('<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">') end %>

    <meta name="keywords" content="ontario Liberal Party - Kathleen Wynne, olp PLA" />
    <meta name="description" content="The Official site of the Ontario Liberal Party" />

    <meta property="og:title" content="More Support for Low-Income Families" />
    <meta property="og:type" content="politician" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <meta property="og:site_name" content="Ontario Liberal Party" />
    <meta property="fb:admins" content="100003812622252,686700080,552055122" />
    <meta property="og:description" content="More Support for Low-Income Families" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;">

    <%= stylesheet_link_tag 'application', :media => 'all' %>
    <%= javascript_include_tag 'application' %>
    <%= csrf_meta_tags %>

    <!-- http://simplefocus.com/flowtype/   -->
    <%= javascript_include_tag 'flowtype.js' %>
    <!-- Floating Side column dependent lib   -->
    <%= javascript_include_tag 'jquery-scrolltofixed-min.js' %>

        <!-- Mini Account Menu - http://www.jqueryrain.com/?M89s3TG4 -->
    <%= stylesheet_link_tag 'jquery.dropdown.css' %>
    <%= javascript_include_tag 'jquery.dropdown.js' %>
        <!-- Mega Menu dependent lib   -->
    <%= javascript_include_tag 'mgmenu_plugins.js' %><!-- Mega Menu Plugins -->
    <%= javascript_include_tag 'mgmenu.js' %><!-- Mega Menu Script -->

    <%= stylesheet_link_tag 'mgmenulib.css', media: "screen" %>
    <%= stylesheet_link_tag 'stylesheet.css', media: "screen" %>

    <!-- Flexslider Lib   -->
    <%= stylesheet_link_tag 'jquery.flexslider.js' %><!-- Homepage only -->
    <%= stylesheet_link_tag 'flexslider.css' %>

    <script>
      $(function (){ $(".float").each(function () {
           var $this = $(this); $this.data("startTop", $this.offset().top);});
             $(window).scroll(function () { var documentScrollTop = $(document).scrollTop();
             $(".float").each(function () { var $this = $(this);
             $this.offset({ top: $this.data("startTop") + documentScrollTop * $this.data("friction"), left: $this.offset().left });
      });
      document.oldScrollTop = documentScrollTop; });
      });

      // Get rid of empty paragraphs
      $(window).load(function(){
          $('p').filter(function () { return this.innerHTML == "" }).remove();

      });//]]>
    </script>
    <script src="/vex/js/vex.js"></script>
    <script src="/vex/js/vex.dialog.js"></script>
    <link href="/vex/css/vex.css" rel="stylesheet" />
    <link href="/vex/css/vex-theme-default.css" rel="stylesheet" />
    <link href="/vex/css/vex-theme-os.css" rel="stylesheet">
    <link href="/vex/css/vex-theme-plain.css" rel="stylesheet">
    <link href="/vex/css/vex-theme-wireframe.css" rel="stylesheet">
    <link href="/vex/css/vex-theme-flat-attack.css" rel="stylesheet">
    <link href="/vex/css/vex-theme-top.css" rel="stylesheet">
    <link href="/vex/css/vex-theme-bottom-right-corner.css" rel="stylesheet">
    <script>vex.defaultOptions.className = 'vex-theme-flat-attack';</script>
  </head>

    <body>
    <%= render 'shared/modal' %>

    <div id="logpanel">
       <div class="container">
        <%= render 'shared/micromenu' %>
        </div>
    </div>

    <div id="logoandmenu">
        <div class="container">
        <div class="logo"><%= image_tag "logo-sm.png" %></div>

        <%= render "shared/menu" %>
        <%= flash[:notice] %>

        </div><!-- closes the .container encompassing the logo and the menu -->
    </div><!-- closes #logoandmenu -->

    <div id="undermenu">
        <div class="container">
            <div style="clear:both; width:100%; display:block;">&nbsp;</div>
        </div>
    </div>
    <!-- Close top container -->

    <div id="pageimageholder" class="<%= yield :backgroundclass %>">
          <div class="container">
            <%= yield %>
          </div>
    </div>

    <div id="footertrigger">
        &nbsp;
    </div>

    <div id="footer">
        <div class="container">
            <%= render 'shared/sitemenu' %>
        </div>
    </div>

    <script>

        $(document).ready(function() {
            // this works -->   $('.col-4').scrollToFixed({ marginTop: 10, limit: $($('h2')[4]).offset().top });
            //  this works too -->  $('.col-4').scrollToFixed({ marginTop: 10, limit: $('#toptrigger').offset().top });
            //    var stickingpoint = $('.col-8').height()-700; // 700 is the height of col-4, the difference is the heightofdiv variable

            var stickingpoint = $('.main').height()-$('.col-4').height();
            $('.col-4').scrollToFixed({ marginTop: 10, limit: stickingpoint });

            $('#footertrigger').scrollToFixed( {
                bottom: 0,
                limit: $('#footertrigger').offset().top
            });


            $('#mgmenu1').universalMegaMenu({
                menu_effect: 'hover_slide',
                menu_speed_show: 300,
                menu_speed_hide: 200,
                menu_speed_delay: 200,
                menu_click_outside: true,
                menubar_trigger : false,
                menubar_hide : false,
                menu_responsive: true
            });

            // This should only load for News Show
            // Quick check for widows and orphans
            //  $("h1").each(function() {
            //      var html = $('h1').html().split(" ");
            //      html = html.slice(0,5).join(" ") + "<br />" + html.slice(5).join(" ");
            //      $('h1').html(html);
            //  });

            $("h2").each(function() {
              var wordArray = $(this).text().split(" ");
              if (wordArray.length > 2) {
                wordArray[wordArray.length-2] += "&nbsp;" + wordArray[wordArray.length-1];
                wordArray.pop();
                $(this).html(wordArray.join(" "));
              }
            });

        });

	    $('#browserInfo').text('Browser (Width : ' + $(window).width() + ' , Height :' + $(window).height() + ' )');

        $(window).resize(function () {
            $('#browserInfo').text('Browser (Width : ' + $(window).width() + ' , Height :' + $(window).height() + ' )');
        });

        $('.body').flowtype({
         minimum   : 500,
         maximum   : 1200,
         minFont   : 11,
         maxFont   : 18,
         fontRatio : 30
        });

        <!-- FlexSlider -->

        // $(function(){
        //   SyntaxHighlighter.all();
        // });
        $(window).load(function(){
            $('.flexslider').flexslider({
                controlNav: false,
                touch: true,
                pauseOnAction: true,
                animation: "slide",
                start: function(slider){
                    $('body').removeClass('loading');
                }
            });
        });

        <!-- emailpopout -->
         $("#emailpopout").click(function(){
            if($("#emailpopout").css('left') == '-240px'){
              $("#emailpopout").stop().animate({left:'2px'},1000);
            };
            if($("#emailpopout").css('left') == '2px'){
               $("#emailpopout").stop().animate({left:'-240px'},1000);
            };
        });
     </script>

    <%= yield :scripts_for_body %>

    </body>
</html>
